<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>booking</title>
<!-- bootstrap -->
<link href="../css/bootstrap.css" rel="stylesheet" />
<link href="../css/bootstrap-fixed.css" rel="stylesheet" />
<link href="../css/bootstrap-datepicker.css" rel="stylesheet" />
<!-- bootstrap的响应式 -->
<link href="../css/bootstrap-responsive.css" rel="stylesheet" />
<!-- 自定义 -->
<link href="../css/lightbox.css" rel="stylesheet" />
<link href="../css/john-global.css" rel="stylesheet" />
<link href="../css/john-public.css" rel="stylesheet" />
<link href="../css/john-booking.css" rel="stylesheet" />

<script src="../js/jquery-1.8.3.js" ></script>
<script src="../js/bootstrap-dropdown.js"></script>
<script src="../js/lightbox.js"></script>
<script src="../js/utils.js"></script>

</head>

<body>

<!-- 主体区域 -->
<div class="content">
	<div class="orders-step-title">
		<h2 class="hd-t">提交订单</h2>
	</div>

	<!-- 订单流程 -->
	<ol class="orders-step orders-step-2">
		<li class="step-1">
			<p class="tips">
				提交订单
				<span class="time">2013-5-18 14:28:55</span>
			</p>
		</li>
		<li class="step-2">
			<p class="tips">
				旅伴回复
			</p>
		</li>
		<li class="step-3">
			<p class="tips">
				付款
			</p>
		</li>
		<li class="step-4">
			<p class="tips">
				完成
			</p>
		</li>
	</ol>

	<!-- 当前步骤提示 -->
	<p class="description-tips">
		Please confirm your order information, and click next to continue to place an order.
	</p>

	<!-- 图片列表 -->
	<div class="gallery-mod">
		<div class="hd">
			<h3 class="hd-t">Street art tour in San Francisco</h3>
		</div>
		<div class="bd">
			<!-- 景点图片 -->
			<ul class="gallery-thumb-list">
				<li><a href="../img/banner-01.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-2.jpg" alt="图片描述-1" /></a></li>
				<li><a href="../img/banner-02.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-3.jpg" alt="图片描述-2" /></a></li>
				<li><a href="../img/banner-03.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-4.jpg" alt="图片描述-3" /></a></li>
				<li><a href="../img/journey-1.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-1.jpg" alt="图片描述-4" /></a></li>
				<li><a href="../img/journey-2.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-2.jpg" alt="图片描述-5" /></a></li>
				<li><a href="../img/journey-3.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-3.jpg" alt="图片描述-6" /></a></li>
				<li><a href="../img/journey-4.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-4.jpg" alt="图片描述-7" /></a></li>
				<li><a href="../img/journey-5.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-1.jpg" alt="图片描述-8" /></a></li>
				<li><a href="../img/journey-6.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-2.jpg" alt="图片描述-9" /></a></li>
				<li><a href="../img/avator-1.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-2.jpg" alt="图片描述-10" /></a></li>
				<li><a href="../img/avator-2.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-3.jpg" alt="图片描述-11" /></a></li>
				<li><a href="../img/avator-3.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-4.jpg" alt="图片描述-12" /></a></li>
				<li><a href="../img/avator-4.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-1.jpg" alt="图片描述-13" /></a></li>
				<li><a href="../img/avator-6.jpg" rel="lightbox[travel]" title="这里是图片描述"><img src="../img/gallery-2.jpg" alt="图片描述-14" /></a></li>
			</ul>
			<!-- 线路 -->
			<ul class="itinerary-list">
				<li>First day  08:00-12:00  Queens food tour in New York/13:00-16:00  Street art tour in San Francisco/19:00-22:00  Explore London like a local.</li>
				<li>Second day  08:00-12:00  Local guide to Paris/14:00-18:00  Best Napa wine tour/20:00-24:00  Food tour in Berlin.</li>
			</ul>
		</div>
	</div>

	<!-- 时间表 -->
	<div class="guide-mod guide-schedule">
		<div class="hd">
			<h3 class="hd-t">Schedule</h3><a href="javascript:void(0);" class="edit">[Edit]</a>
		</div>
		<div class="bd">
			<ul class="travel-time-list">
				<li>
					<strong>2013-05-15</strong>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
				</li>
				<li>
					<strong>2013-05-16</strong>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
				</li>
				<li>
					<strong>2013-05-17</strong>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
				</li>
				<li>
					<strong>2013-05-18</strong>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
				</li>
				<li>
					<strong>2013-05-19</strong>
					<span>08:00-12:00</span>
				</li>
				<li>
					<strong>2013-05-20</strong>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
					<span>08:00-12:00</span>
				</li>
			</ul>
		</div>
	</div>
	
	<!-- 景点 -->
	<div class="guide-mod attractions">
		<div class="hd">
			<h3 class="hd-t">View spot</h3><a href="javascript:void(0);" class="edit">[Edit]</a>
		</div>
		<div class="bd">
			<!-- 如果是在编辑状态下 -->
			<div class="ui-input-wrap">
				<input type="text" class="input-attractions" /><i class="i-map-marker"></i>
			</div>
			<button class="ui-btn-small ui-btn-yellow">Sure</button>
			<!-- 如果是自由行，并且景点为空的话，显示以下信息 -->
			<ul class="attractions-list">
				<li class="empty">您可以点击 [Edit] 添加感兴趣的景点</li>
			</ul>
			<!-- 如果是已经有了相应的行程景点的话，显示以下信息 -->
			<ul class="attractions-list">
				<li>Queens food tour in New York<a href="javascript:void(0);" class="i-remove">Remove</a></li>
				<li>Street art tour in San Francisco<a href="javascript:void(0);" class="i-remove">Remove</a></li>
				<li>Local guide to Paris<a href="javascript:void(0);" class="i-remove">Remove</a></li>
				<li>Explore London like a local<a href="javascript:void(0);" class="i-remove">Remove</a></li>
				<li>Best Napa wine tour<a href="javascript:void(0);" class="i-remove">Remove</a></li>
				<li>Food tour in Berlin<a href="javascript:void(0);" class="i-remove">Remove</a></li>
			</ul>
		</div>
	</div>

	<!-- 旅伴 -->
	<div class="guide-mod guide-companion">
		<div class="hd">
			<h3 class="hd-t">Guide</h3><a href="javascript:void(0);" class="edit">[Edit]</a>
		</div>
		<div class="bd">
			<!-- 当前所选的旅伴 -->
			<table class="companion-active">
				<tr>
					<td class="pic"><a href="#" target="_blank"><img src="../img/avator-1.jpg" alt="图片描述" class="avator" /></a></td>
					<td class="name"><a href="#" target="_blank">Yi Lian</a></td>
					<td class="price">$20/h</td>
					<td class="duration">48h</td>
					<td class="amount">In all:<span class="amount-price">$960</span></td>
					<td class="operate"></td>
				</tr>
			</table>
			<!--
				其它旅伴
				交互方式：点击左右两个按钮的时候，进行异步分页，因为这里的人数可能很多；
			-->
			<div class="travel-companions">
				<ul class="list">
					<li class="item">
						<div class="user">
							<a href="#" target="_blank"><img src="../img/avator-1.jpg" alt="图片描述" class="avator" /></a>
						</div>
						<div class="info">
							<strong class="name"><a href="#" target="_blank">Yi Lian</a></strong>
							<div class="price">&yen;100 per hour</div>
							<div class="group-btn">
								<a href="javascript:void(0);" class="ui-btn-small btn-book-small"><span>Book it</span></a>
							</div>
						</div>
					</li>
					<li class="item">
						<div class="user">
							<a href="#" target="_blank"><img src="../img/avator-2.jpg" alt="图片描述" class="avator" /></a>
						</div>
						<div class="info">
							<strong class="name"><a href="#" target="_blank">Yi Lian</a></strong>
							<div class="price">&yen;100 per hour</div>
							<div class="group-btn">
								<a href="javascript:void(0);" class="ui-btn-small btn-book-small"><span>Book it</span></a>
							</div>
						</div>
					</li>
					<li class="item">
						<div class="user">
							<a href="#" target="_blank"><img src="../img/avator-3.jpg" alt="图片描述" class="avator" /></a>
						</div>
						<div class="info">
							<strong class="name"><a href="#" target="_blank">Yi Lian</a></strong>
							<div class="price">&yen;100 per hour</div>
							<div class="group-btn">
								<a href="javascript:void(0);" class="ui-btn-small btn-book-small"><span>Book it</span></a>
							</div>
						</div>
					</li>
					<li class="item">
						<div class="user">
							<a href="#" target="_blank"><img src="../img/avator-4.jpg" alt="图片描述" class="avator" /></a>
						</div>
						<div class="info">
							<strong class="name"><a href="#" target="_blank">Yi Lian</a></strong>
							<div class="price">&yen;100 per hour</div>
							<div class="group-btn">
								<a href="javascript:void(0);" class="ui-btn-small btn-book-small"><span>Book it</span></a>
							</div>
						</div>
					</li>
				</ul>
				<a href="javascript:void(0);" class="page-prev">prev</a>
				<a href="javascript:void(0);" class="page-next">next</a>
			</div>
			<!-- 第一次所选择的旅伴 -->
			<div class="history-companions">
				<h4 class="mod-hd-t">Your first choice</h4>
				<div class="mod-bd">
					<table class="companion-active">
						<tr>
							<td class="pic"><a href="#" target="_blank"><img src="../img/avator-1.jpg" alt="图片描述" class="avator" /></a></td>
							<td class="name"><a href="#" target="_blank">Yi Lian</a></td>
							<td class="price">$20/h</td>
							<td class="duration">48h</td>
							<td class="amount">In all:<span class="amount-price">$960</span></td>
							<td class="operate">
								<a href="javascript:void(0);" class="ui-btn-small btn-book-small"><span>Book it again</span></a>
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>
	</div>

	<!-- 旅客 -->
	<div class="guide-mod guide-traveler">
		<div class="hd">
			<h3 class="hd-t">Person</h3><a href="javascript:void(0);" class="edit">[Edit]</a>
		</div>
		<div class="bd">
			<p><strong class="quantity">10</strong> People will join this journey</p>

			<div class="ui-input-wrap">
				<input type="text" class="input-person" placeholder="选择参加人数" value="" data-toggle="dropdown" />
				<i class="i-user"></i>
				<ul class="dropdown-menu">
					<li><a href="javascript:void(0);">1 Person</a></li>
					<li><a href="javascript:void(0);">2 People</a></li>
					<li><a href="javascript:void(0);">3 People</a></li>
					<li><a href="javascript:void(0);">4 People</a></li>
					<li><a href="javascript:void(0);">5 People</a></li>
					<li><a href="javascript:void(0);">6 People</a></li>
					<li><a href="javascript:void(0);">7 People</a></li>
					<li><a href="javascript:void(0);">8 People</a></li>
					<li><a href="javascript:void(0);">9 People</a></li>
					<li><a href="javascript:void(0);">10+ People</a></li>
				</ul>
			</div>
			<button class="ui-btn-small ui-btn-yellow">Sure</button>
		</div>
	</div>

	<!-- 碰面地点 -->
	<div class="guide-mod guide-place">
		<div class="hd">
			<h3 class="hd-t">Meet Place</h3><a href="javascript:void(0);" class="edit">[Edit]</a>
		</div>
		<div class="bd">
			<p>guangd, shenzhen, nanshan</p>
			<div class="ui-input-wrap">
				<input type="text" class="input-person" placeholder="选择见面地址" data-provide="typeahead" data-items="4" />
				<i class="i-map-marker"></i>
				<ul class="typeahead dropdown-menu">
					<li data-value="South Carolina" class="active"><a href="#"><strong>S</strong>outh Carolina</a></li>
					<li data-value="South Dakota"><a href="#"><strong>S</strong>outh Dakota</a></li>
					<li data-value="Alaska"><a href="#">Ala<strong>s</strong>ka</a></li>
					<li data-value="Arkansas"><a href="#">Arkan<strong>s</strong>a<strong>s</strong></a></li>
				</ul>
			</div>
			<button class="ui-btn-small ui-btn-yellow">Sure</button>
		</div>
	</div>

	<!-- 留言、描述 -->
	<div class="guide-mod msg-description">
		<div class="hd">
			<h3 class="hd-t">Leave a message</h3>
		</div>
		<div class="bd">
			<textarea class="input-area"></textarea>
		</div>
	</div>

	<!-- 错误提示，旅客跟旅伴有冲突的情况下会出现该提示 -->
	<div class="alert alert-error">
		<ul class="alert-error-list">
			<li>
				当前的Schedule与Ashley提供服务的时间不吻合
				<label>
					<span class="ui-checkbox"><input type="checkbox" class="checkbox"></span>
					<span>忽略</span>
				</label>
			</li>
			<li>
				当前选择的景点“Window Of The Word”步骤Ashley的服务范围
				<label>
					<span class="ui-checkbox"><input type="checkbox" class="checkbox"></span>
					<span>忽略</span>
				</label>
			</li>
		</ul>
	</div>

	<div class="guide-amount">
		<strong class="pay-info">应付金额：<span class="price">$960</span></strong>
		<button class="ui-btn-big btn-submit-orders"><span>Submit Orders</span></button>
	</div>
</div>

<script type="text/javascript">
	$(function(){
		// 复选框
		$('.ui-checkbox').checkbox();

		/**
		 * 订单页面的相关方法
		 * @type {Object}
		 */
		var Orders = {
			/**
			 * 正在编辑的模块，默认添加的className
			 * @type {String}
			 */
			editClassName : 'status-editing',
			/**
			 * 当用户点击某个模块进行编辑的时候，调用此方法
			 * 交互效果：把当前模块的[Edit]给隐藏，并添加一个遮罩层防止用户点击非编辑模块
			 * @return {[type]} [description]
			 */
			edit : function(e){
				var backdrop = this.tmpl('backdrop');
				var button = this.tmpl('button');
				var target = e.target || e.srcElement;
				var parents = $(target).parents('.guide-mod');
				// 为当前的编辑模块添加className
				parents.addClass(this.editClassName);
				// 插入遮罩层
				parents.append(backdrop);
				// 插入保存按钮
				var bd = parents.find('.bd');
				if(!bd.length) return false;
				bd.append(button);
			},

			/**
			 * 在自由行下，删除景点
			 * 通过指定一个callback进行操作
			 * @param  {[type]} opts [description]
			 * @return {[type]}      [description]
			 */
			removeAttractions : function(e){
				var target = e.target || e.srcElement;
				var parent = $(target).parent();
				var parents = parent.parent();
				var dom_child = parents[0].children;
				parent.remove();
				if(!dom_child.length){
					var tmpl = this.tmpl('attractions');
					parents.append(tmpl);
				}
			},

			tmpl : function(type){
				if(!type) return;
				var tmpl;
				switch(type){
					// 景点
					case 'attractions' :
						tmpl = [
							'<li class="empty">您可以点击 [Edit] 添加感兴趣的景点</li>'
						].join('');
						break;
					// 遮罩层，用于在编辑状态下，防止非编辑状态的内容被点击到
					case 'backdrop' :
						tmpl = [
							'<div class="ui-backdrop in"><!-- 遮罩层，用于在编辑状态下，防止非编辑状态的内容被点击到 --></div>'
						].join('');
						break;
					// 保存按钮
					case 'button' :
						tmpl = [
							'<div class="btn-wrap">',
								'<button class="ui-btn-big ui-btn-primary"><span>Save</span></button>',
							'</div>'
						].join('');
						break;
				}
				return tmpl;
			}
		};

		$('.guide-mod .edit').on('click', function(e){
			Orders.edit(e);
			return false;
		});

		$('.i-remove').on('click', function(e){
			var _this = $(this);
			Orders.removeAttractions(e);
			return false;
		})
	});
</script>

</body>
</html>
